<%= render 'shared/hero_banner' %>

<div class="row">
  <!-- Mobile Filter Toggle Button (visible only on small screens) -->
  <div class="col-12 d-lg-none mb-3">
    <button class="btn btn-primary w-100" type="button" data-bs-toggle="collapse" data-bs-target="#mobileSidebar" aria-expanded="false" aria-controls="mobileSidebar">
      <i class="fas fa-filter me-2"></i> Filter & Categories
    </button>
  </div>

  <!-- Sidebar with Categories and Search (collapsible on mobile) -->
  <div class="col-lg-3 mb-4">
    <div class="sidebar-container collapse d-lg-block" id="mobileSidebar">
      <!-- Search Form -->
      <%= render 'shared/search_form', categories: @categories %>

      <!-- Categories -->
      <%= render 'shared/category_list', categories: @categories %>
    </div>
  </div>

  <!-- Main Content with Products -->
  <div class="col-lg-9">
    <!-- Page Title with Filter Options -->
    <%= render 'shared/filter_options', title: @page_title %>

    <!-- Products Grid -->
    <div class="row">
      <% if @products.any? %>
        <% @products.each do |product| %>
          <div class="col-6 col-md-6 col-lg-4 mb-4">
            <%= render 'shared/product_card', product: product %>
          </div>
        <% end %>
      <% else %>
        <div class="col-12">
          <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i> No products found. Try adjusting your search criteria.
          </div>
        </div>
      <% end %>
    </div>

    <!-- Pagination -->
    <div class="d-flex justify-content-center mt-4">
      <%= paginate @products %>
    </div>
  </div>
</div>

<!-- Featured Categories Section -->
<%= render 'shared/featured_categories', categories: @categories %>
